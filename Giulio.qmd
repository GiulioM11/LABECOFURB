---
title: "Giulio Maiolino"
format: html
editor: visual
---

```{r}
#| label: load-packages
#| include: false

library(GetBCBData)
library(tidyverse)
library(gganimate)
library(gifski)
library(scales)
library(lubridate)
library(zoo)

# OBTER DADOS DO INPC
my.id <- c(INPC = 188)

df.bcb <- gbcbd_get_series(
  id = my.id,
  first.date = '1979-04-30',
  last.date = Sys.Date(),
  format.data = 'long',
  use.memoise = TRUE,
  cache.path = tempdir(),
  do.parallel = FALSE
)

# M√âDIA M√ìVEL
df.bcb <- df.bcb %>%
  arrange(ref.date) %>%
  mutate(
    media_movel = zoo::rollmean(value, k = 6, fill = NA, align = "right")
  )

# ANOTA√á√ïES HIST√ìRICAS
anotacoes <- tribble(
  ~ref.date,         ~value, ~label,
  as.Date("1990-03-01"), 82.39, "üìå Plano Collor: hiperinfla√ß√£o\natinge pico de 82,39%",
  as.Date("1994-07-01"), 6.84, "üìå Plano Real: controle da infla√ß√£o",
  as.Date("2002-12-01"), 3.02, "üìå Elei√ß√£o presidencial e\ncrise cambial",
  as.Date("2015-01-01"), 1.48, "üìå Recess√£o econ√¥mica e tarifa√ßo",
  as.Date("2020-04-01"), 0.31, "üìå In√≠cio da pandemia COVID-19"
)

# DADOS LONGOS PARA USAR LINHAS COM LEGENDA
df.long <- df.bcb %>%
  select(ref.date, value, media_movel) %>%
  pivot_longer(cols = c(value, media_movel), names_to = "tipo", values_to = "valor") %>%
  mutate(
    tipo = recode(tipo,
                  "value" = "INPC mensal (%)",
                  "media_movel" = "M√©dia m√≥vel 6 meses")
  )

#| label: render-gif
#| echo: false
#| warning: false

```

## √çndice nacional de pre√ßos ao consumidor (IPCA)

**O que √© o IPCA?**\
O IPCA (√çndice Nacional de Pre√ßos ao Consumidor Amplo) √© o principal indicador da infla√ß√£o no Brasil. Ele mede a varia√ß√£o de pre√ßos de uma cesta de bens e servi√ßos consumidos por fam√≠lias com renda de 1 a 40 sal√°rios m√≠nimos. √â utilizado pelo Banco Central para definir a pol√≠tica monet√°ria, metas de infla√ß√£o e reajustes econ√¥micos.

**Institui√ß√£o Respons√°vel**\
O √≠ndice √© calculado e publicado mensalmente pelo IBGE desde 1980. O Banco Central utiliza o IPCA para o regime de metas de infla√ß√£o.

**Composi√ß√£o do IPCA**\
A cesta de consumo inclui itens de:

-   Alimenta√ß√£o e bebidas

-   Habita√ß√£o

-   Transportes

-   Sa√∫de e cuidados pessoais

-   Educa√ß√£o

-   Vestu√°rio

-   Despesas pessoais

-   Comunica√ß√£o

    Cada grupo possui peso definido pela POF (Pesquisa de Or√ßamentos Familiares).\
    Abrange 16 regi√µes metropolitanas, incluindo S√£o Paulo, Rio de Janeiro, Bras√≠lia, Recife, Salvador, Curitiba, Porto Alegre, entre outras.

**Para que serve o IPCA?**

-   Orienta decis√µes de taxa Selic (pelo COPOM)

-   Base para metas de infla√ß√£o (definidas pelo CMN)

-   Utilizado para reajustes salariais, contratos e benef√≠cios

-   Refer√™ncia para an√°lises econ√¥micas e poder de compra

**Evolu√ß√£o Hist√≥rica**

-   Anos 1980-1990: hiperinfla√ß√£o, com picos acima de 80% ao m√™s

-   1994: estabilidade com o Plano Real

-   2000+: flutua√ß√µes entre 3% e 10% ao ano, com crises pontuais (2002, 2015, 2021)

**F√≥rmula Geral Simplificada**

IPCA=(‚àë(Pi‚ãÖQi)‚àë(Pi‚àí1‚ãÖQi)‚àí1)IPCA = \left(\frac{\sum (P_i \cdot Q_i)}{\sum (P_{i-1} \cdot Q_i)} - 1\right)IPCA=(‚àë(Pi‚àí1‚Äã‚ãÖQi‚Äã)‚àë(Pi‚Äã‚ãÖQi‚Äã)‚Äã‚àí1)

Onde:

-   PiP_iPi‚Äã: Pre√ßo no per√≠odo atual

-   Pi‚àí1P_{i-1}Pi‚àí1‚Äã: Pre√ßo no per√≠odo anterior

-   QiQ_iQi‚Äã: Quantidade ponderada do item

**Conclus√£o**
O IPCA √© essencial para o monitoramento da infla√ß√£o no Brasil. Serve de b√∫ssola para pol√≠ticas econ√¥micas, reajustes e an√°lise do custo de vida, refletindo os ciclos hist√≥ricos e desafios da economia brasileira.

## An√°lise do Gr√°fico do INPC Mensal no Brasil (1979 at√© Hoje)

O gr√°fico apresenta a evolu√ß√£o da infla√ß√£o mensal medida pelo **INPC (√çndice Nacional de Pre√ßos ao Consumidor)**, incluindo uma **m√©dia m√≥vel de 6 meses** para suavizar varia√ß√µes e destacar tend√™ncias.

### Principais pontos:

-    **Per√≠odo de alta infla√ß√£o (fim dos anos 80 e in√≠cio dos 90):** A infla√ß√£o atingiu picos extremos, como no **Plano Collor (mar√ßo/1990), quando chegou a 82,39% mensal**, evidenciando hiperinfla√ß√£o.

-   **Estabiliza√ß√£o p√≥s-Plano Real (a partir de 1994):** O gr√°fico mostra queda abrupta e estabiliza√ß√£o da infla√ß√£o, refletindo o sucesso do Plano Real em controlar a infla√ß√£o.

-   **Oscila√ß√µes moderadas e eventos pontuais:** A partir dos anos 2000, a infla√ß√£o manteve-se relativamente baixa, mas eventos como a **elei√ß√£o presidencial e crise cambial de 2002** e a **recess√£o econ√¥mica em 2015** causaram eleva√ß√µes tempor√°rias.

-   **Impacto da pandemia em 2020:** Houve uma queda acentuada da infla√ß√£o mensal no in√≠cio da pandemia COVID-19, provavelmente associada √† retra√ß√£o da atividade econ√¥mica.

### Interpreta√ß√£o visual:

-    A **linha preta s√≥lida** representa o INPC mensal, mostrando a volatilidade natural do √≠ndice.

-   A **linha verde tracejada** mostra a m√©dia m√≥vel de 6 meses, evidenciando a tend√™ncia subjacente com menos ru√≠do.

-   Os **pontos vermelhos** e textos destacam momentos econ√¥micos relevantes que influenciaram diretamente a infla√ß√£o, facilitando a correla√ß√£o entre pol√≠tica econ√¥mica e varia√ß√µes inflacion√°rias.

```{r}
#| label: graficodadosempainel
#| warning: false
#| echo: false

ggplot() +
  geom_line(data = df.long, aes(x = ref.date, y = valor, color = tipo, linetype = tipo), size = 1.2) +
  scale_color_manual(values = c(
    "INPC mensal (%)" = "black",
    "M√©dia m√≥vel 6 meses" = "forestgreen"
  )) +
  scale_linetype_manual(values = c(
    "INPC mensal (%)" = "solid",
    "M√©dia m√≥vel 6 meses" = "dashed"
  )) +
  geom_point(data = anotacoes, aes(x = ref.date, y = value), color = "red", size = 3) +
  geom_text(
    data = anotacoes,
    aes(x = ref.date, y = value, label = label),
    hjust = 0, vjust = -0.5, size = 4, color = "black", fontface = "bold", lineheight = 1.1
  ) +
  scale_x_date(
    breaks = seq(from = as.Date("1980-01-01"), to = Sys.Date(), by = "10 years"),
    date_labels = "%Y"
  ) +
  scale_y_continuous(
    labels = label_number(suffix = "%", accuracy = 0.1),
    expand = expansion(mult = c(0.05, 0.15))
  ) +
  labs(
    title = "üìà INPC no Brasil: Infla√ß√£o Mensal com Destaques Hist√≥ricos",
    subtitle = "Evolu√ß√£o: {format(frame_along, '%B de %Y')} | Inclui m√©dia m√≥vel de 6 meses",
    caption = "Fonte: Banco Central do Brasil (SGS 188) ‚Ä¢ Visualiza√ß√£o animada",
    x = "Ano",
    y = "Varia√ß√£o mensal (%)",
    color = "Indicadores",
    linetype = "Indicadores"
  ) +
  theme_minimal(base_size = 14) +
  theme(
    plot.title = element_text(size = 16, face = "bold", hjust = 0.5, color = "#2C3E50"),
    plot.subtitle = element_text(size = 13, hjust = 0.5, color = "#555555"),
    plot.caption = element_text(size = 9, hjust = 1, face = "italic"),
    axis.title.y = element_text(size = 12),
    panel.grid.minor = element_blank(),
    legend.position = "top",
    legend.title = element_text(face = "bold"),
    legend.box.spacing = unit(0.3, "cm")
  ) +
  transition_reveal(ref.date)

#| label: render-gif
#| echo: false
#| warning: false

```
